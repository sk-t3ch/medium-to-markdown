{
  "title": "How to use Amplify Auth in Nuxt JS",
  "date": "2020-11-10T11:04:05.501Z",
  "size": 3472,
  "markdown": "\n# How to use Amplify Auth in Nuxt JS\n\nVue JS is a frontend framework often extended with Nuxt JS to get great SSO value out of the box. AWS Amplify allows you to add authentication to your Vue web app with ease as shown in a previous article. In this article, I demonstrate how to add Cognito authentication with Amplify to a Nuxt web app.\n\n![](https://cdn-images-1.medium.com/max/4000/1*KIt3rz0CJ-Iul_Ee1-VcQg.png)\n\n## Why are we even using Nuxt JS and Amplify?\n\n[Nuxt JS](https://nuxtjs.org/) extends upon [Vue JS](https://vuejs.org/) with the following useful features:\n\n* Universal app means SSO value\n\n* Static site generation\n\n* Automatic route generation\n\n[Amplify](https://github.com/aws-amplify/amplify-js) is an AWS framework which can be included in a Vue JS app to connect to AWS resources for Authentication, APIs plus much more. Amplify enables the use of [Congito](https://aws.amazon.com/cognito/) authentication, meaning the system can be serverless and makes it simple to add authorisation on APIs, too.\n\n## The Setup\n\n*Assuming the existence of a Congito User Pool:*\n\nThe basic structure of this project follows the steps of a Nuxt project\n\n    `yarn create nuxt-app <project-name>`\n\nAdding Amplify:\n\n    yarn add aws-amplify @aws-amplify/ui-vue\n\n## The Problem\n\nIn the tutorial for [Vue JS Amplify](https://docs.amplify.aws/), you add your configuration into `main.js`, but this isn’t a thing in Nuxt…\n\n## The Solution\n\n1. Add `amplify.js` to `/plugins` in your Nuxt project\n\nConfigure this to match your setup — I have configured a Congito User Pool and an API which is only accessible to logged in users.\n\n    import Vue from 'vue'\n    import '@aws-amplify/ui-vue'\n    import Amplify, { Auth } from 'aws-amplify'\n\n    Amplify.configure({\n      Auth: {\n        region: 'EU-WEST-1',\n        userPoolId: process.env.userPoolId,\n        userPoolWebClientId: process.env.userPoolWebClientId,\n        mandatorySignIn: false,\n        oauth: {\n          scope: ['email', 'openid'],\n          redirectSignIn: `https://${process.env.rootDomain}/`,\n          redirectSignOut: `https://${process.env.rootDomain}/`,\n          responseType: 'code'\n        }\n      },\n      API: {\n        endpoints: [\n          {\n            name: 'UserAPI',\n            endpoint: `https://${process.env.userApiDomain}`,\n            custom_header: async () => {\n              return { Authorization: `Bearer ${(await Auth.currentSession()).getIdToken().getJwtToken()}` }\n            }\n          }\n        ]\n      }\n    })\n\n    Vue.prototype.$Amplify = Amplify\n\n2. Add the following snippet to your `nuxt.config.js`\n\n    plugins: [{ src: \"~/plugins/aws-amplify.js\", `ssr: false` }]\n\n## The Conclusion\n\nHad I read the Nuxt docs better, I might have known how to do it.\n\nThe fun doesn’t stop here and you can add all of your favourite Vue JS modules this way, including [Vuetify](https://vuetifyjs.com/) and [Vue-Clipboard](https://github.com/Inndy/vue-clipboard2).\n\nOr, go further with Nuxt and add modules like [Sitemap Generator](https://github.com/nuxt-community/sitemap-module).\n\n## Thanks For Reading\n\nI hope you have enjoyed this article. If you like the style, check out [T3chFlicks.org](https://t3chflicks.org) for more tech focused educational content ([YouTube](https://www.youtube.com/channel/UC0eSD-tdiJMI5GQTkMmZ-6w), [Instagram](https://www.instagram.com/t3chflicks/), [Facebook](https://www.facebook.com/t3chflicks), [Twitter](https://twitter.com/t3chflicks))."
}