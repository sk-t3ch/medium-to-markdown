])}while(1);</x>{"success":true,"payload":{"value":{"id":"44bc4bb8388e","versionId":"6e2c0d90b159","creatorId":"c6b26bf1493d","homeCollectionId":"f5af2b715248","title":"üí∏ Pay Me: Quickstart for creating a SaaS pt.2‚Ää‚Äî‚ÄäStripe Payments","detectedLanguage":"en","latestVersion":"6e2c0d90b159","latestPublishedVersion":"6e2c0d90b159","hasUnpublishedEdits":false,"latestRev":2544,"createdAt":1595862538286,"updatedAt":1613412656890,"acceptedAt":0,"firstPublishedAt":1599420742552,"latestPublishedAt":1613412645644,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a‚Ä¶","bodyModel":{"paragraphs":[{"name":"0d31","type":3,"text":"üí∏ Pay Me: Quickstart for creating a SaaS pt.2 ‚Äî Stripe Payments","markups":[]},{"name":"0890","type":1,"text":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a serverless SaaS on AWS. It uses the Stripe API and Vue-Checkout library to perform payments and manages users with Cognito, building on the architecture from part 1. Check out the live demo üíΩ.","markups":[{"type":3,"start":288,"end":294,"href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","title":"","rel":"","anchorType":0},{"type":3,"start":310,"end":322,"href":"https://saas-app.t3chflicks.org","title":"","rel":"","anchorType":0}]},{"name":"18ab","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*9RH_PC5EM5l0fM9wnEE97Q.png","originalWidth":2000,"originalHeight":2000,"isFeatured":true}},{"name":"787c","type":1,"text":"Payments systems are a complex but necessary part of running a SaaS. Turning to a payment service side-steps most of the complexity and responsibility, but usually costs a percentage or flat fee for each transaction. Stripe offers payment system solution and charges 1.4%+20p for European cards and 2.9%+20p for for non-European cards per transaction. Stripe also has other useful features such as:","markups":[{"type":3,"start":217,"end":223,"href":"https://stripe.com/","title":"","rel":"","anchorType":0}],"hasDropCap":true},{"name":"07e1","type":9,"text":"customer management, including storing payment details","markups":[]},{"name":"3870","type":9,"text":"manage products and prices","markups":[]},{"name":"668f","type":9,"text":"create payments and subscriptions","markups":[]},{"name":"e01e","type":9,"text":"dashboards and insights","markups":[]},{"name":"75f4","type":1,"text":"In this article, I will demonstrate integrating Stripe‚Äôs payment solution and how to store user details, make subscriptions and instant payments. In a previous article, I demonstrated how to create a SaaS user management application which allows users to manage their API key and monitor usage.","markups":[]},{"name":"9011","type":14,"text":"üö´ Users Only: Quickstart for creating a SaaS pt. 1 ‚Äî User Management\nManaging users and API keys is a necessary task for creating a Software as a Service (SaaS). In this article, I‚Ä¶medium.com","markups":[{"type":3,"start":0,"end":192,"href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","title":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","rel":"","anchorType":0},{"type":1,"start":0,"end":69},{"type":2,"start":70,"end":182}],"mixtapeMetadata":{"mediaResourceId":"30fc735a8c8523ba8cdd479c1daf6eb1","thumbnailImageId":"1*9RH_PC5EM5l0fM9wnEE97Q.png","href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565"}},{"name":"fe3b","type":1,"text":"I want to limit the number of requests a user can make per month and scale that with an amount of money that would make the SaaS profitable. I have chosen to use credits instead of number of requests to open up the possibility of having multiple services which might be more costly to run. This also allows you to charge multiple credits.","markups":[]},{"name":"6905","type":1,"text":"I have divided plans up into three tiers which can be subscribed to or as pay-as-you-go:","markups":[]},{"name":"ca64","type":9,"text":"Free ‚Äî 50 Credits per week","markups":[{"type":2,"start":0,"end":4}]},{"name":"4195","type":9,"text":"Basic ‚Äî1,000 Credits per month","markups":[{"type":2,"start":0,"end":5}]},{"name":"98f0","type":9,"text":"Power ‚Äî 100,000 Credits per month","markups":[{"type":2,"start":0,"end":5}]},{"name":"19fa","type":6,"text":"In a future article, I hope to investigate the cost of the architecture per user to determine a fair price for the service.","markups":[{"type":2,"start":0,"end":123}]},{"name":"9ba4","type":1,"text":"Stripe offers both the ability to make instant payments and subscriptions. Your products and prices must be stored on the Stripe service and when a purchase is successfully completed, Stripe will notify you using a web hook that you define. This web hook is called on subscription payment being successful too.","markups":[]},{"name":"bc5d","type":1,"text":"The architecture extends upon the previous User Manager App with another DynamoDB table to store products, a checkout function on the User API, a Stripe web hook API, and a State machine to manage users‚Äô credit.","markups":[]},{"name":"6f92","type":4,"text":"SaaS Architecture Diagram","markups":[],"layout":1,"metadata":{"id":"1*lvDDAutc-VL-sFUzYZxCng.png","originalWidth":1028,"originalHeight":801}},{"name":"8a3a","type":7,"text":"The full code for this project can be found here ‚òÅÔ∏è","markups":[{"type":3,"start":0,"end":51,"href":"https://github.com/sk-t3ch/AWS_Stripe-SaaS-quickstart","title":"","rel":"","anchorType":0}]},{"name":"a13f","type":7,"text":"The live demo can be found here üíΩ","markups":[{"type":3,"start":0,"end":34,"href":"https://saas-app.t3chflicks.org","title":"","rel":"","anchorType":0}]},{"name":"c055","type":4,"text":"Video of User buying subscription with SaaS App","markups":[],"layout":1,"metadata":{"id":"1*VJ5IjcLZ8taS1JKt0Gib_g.gif","originalWidth":800,"originalHeight":436}},{"name":"2aa1","type":3,"text":"Let‚Äôs Build! üî©","markups":[]},{"name":"9160","type":3,"text":"Backend","markups":[]},{"name":"44af","type":13,"text":"Credit","markups":[]},{"name":"db92","type":1,"text":"User credit is managed using a State Machine. The Cognito post-confirmation hook trigger a Lambda to create a user and begin an execution of the State Machine with the Free plan.","markups":[{"type":3,"start":31,"end":44,"href":"https://aws.amazon.com/step-functions","title":"","rel":"","anchorType":0},{"type":2,"start":168,"end":173}]},{"name":"250c","type":4,"text":"User Management State Machine","markups":[],"layout":1,"metadata":{"id":"1*vwxGotYkwlGmvkZD6cwalA.png","originalWidth":306,"originalHeight":319}},{"name":"529c","type":1,"text":"State Machines offer the ability to wait a specific amount of time and this does not cost. This allows us to periodically add credits to users on the Free plan. This is a requirement as this plan is not purchased and therefore cannot use the Stripe web hook as a trigger to add credits (see later).","markups":[{"type":2,"start":150,"end":154}]},{"name":"c8b3","type":1,"text":"Using a State Machines to construct flows means that extensions are easily added, such as sending email alerts. The cost of a standard State Machine is $0.025 per thousand state transitions. In the above State Machine, a free user would cost $0.025/1000 * 3 = $0.000075 per User per week ‚Äî not including the Lambda fees. There is also a limit of 25,000 executions at a time.","markups":[{"type":3,"start":126,"end":134,"href":"https://aws.amazon.com/step-functions/pricing/","title":"","rel":"","anchorType":0}]},{"name":"1cee","type":13,"text":"Product Table","markups":[]},{"name":"d3eb","type":1,"text":"Stripe allows you to create products which can have multiple prices. This is particularly useful for SaaS where you may offer the same product as an instant buy or recurring subscription.","markups":[]},{"name":"db8a","type":1,"text":"I have defined the products in a JSON file and attempted to sync this details with both Stripe and a DynamoDB table using the following script:","markups":[]},{"name":"3db1","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"1b12f72286c86cb9a91a720dc4b57cc3","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"045a","type":13,"text":"User API","markups":[]},{"name":"cc0c","type":1,"text":"The previous User Management system from part 1 has:","markups":[{"type":3,"start":41,"end":47,"href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","title":"","rel":"","anchorType":0}]},{"name":"86b6","type":1,"text":"/generate-key ‚Äî this regenerates the User‚Äôs API key","markups":[{"type":10,"start":0,"end":13}]},{"name":"eacf","type":1,"text":"/user ‚Äî returns details like API key, last Update time, and subscription Plan","markups":[{"type":10,"start":0,"end":5}]},{"name":"7825","type":1,"text":"This is extended with:","markups":[]},{"name":"571c","type":1,"text":"/create-session","markups":[{"type":10,"start":0,"end":15}]},{"name":"e871","type":1,"text":"/cancel-subscriptions","markups":[{"type":10,"start":0,"end":21}]},{"name":"85ab","type":13,"text":"Create Session","markups":[]},{"name":"b9e1","type":1,"text":"The Stripe-checkout frontend component requires a session-Id to initiate the payment sequence.","markups":[]},{"name":"08e3","type":1,"text":"When the user selects a product on the frontend, a request is sent to the /create-session endpoint where following function is run:","markups":[{"type":10,"start":74,"end":89}]},{"name":"8011","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"bc634acb74036ceb5fccd1dba3aa5d8a","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"185a","type":1,"text":"When creating a session, you can also attach meta-data. This data is accessible on the resultant success object of the payment sent by Stripe to your web hook.","markups":[{"type":10,"start":45,"end":54}]},{"name":"7a4e","type":13,"text":"Cancel Subscriptions","markups":[]},{"name":"3908","type":1,"text":"Users should be able to cancel their subscription to the SaaS at any time. In this example, selecting the Free plan in the frontend cancels all other subscriptions. This is achieved simply by referencing a customer id on a cancel call to Stipe.","markups":[{"type":2,"start":106,"end":110}]},{"name":"62c9","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"e7d9486e1b760c95bcc696ebb57317ad","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"3780","type":13,"text":"WebHook API","markups":[]},{"name":"7de7","type":1,"text":"Stripe sends transaction events to a web hook which you must create and define using the Stripe API:","markups":[]},{"name":"8dc3","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"d23feaac37d19ce6e95644f9880954ab","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"6087","type":1,"text":"Once you have defined the web hook, the secret is used in the following Lambda function which processes the successful charge events:","markups":[]},{"name":"413d","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"608e4cb5fcf3c935c5861a081dc40192","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"fd58","type":1,"text":"Again, I have added open CORS whilst developing. For security, these should been locked down so that only Stripe can call this API.","markups":[]},{"name":"2bf2","type":13,"text":"Test API","markups":[]},{"name":"9fb1","type":1,"text":"The test service API still uses the user‚Äôs API key for a query on a GSI of the User table to get the username and credit count. The credit field is decremented every time a request is made to the service.","markups":[]},{"name":"8fbe","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"8efd9f3e843404791b1ad8666632c55a","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"e557","type":3,"text":"Frontend","markups":[]},{"name":"e1d2","type":1,"text":"The frontend is created using Vue JS with the AWS Amplify package and components ‚Äî this is described in the pevious User Manager App from part 1. Here, we add the ability to make payments.","markups":[{"type":3,"start":138,"end":144,"href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","title":"","rel":"","anchorType":0}]},{"name":"a7b9","type":13,"text":"Stripe Checkout","markups":[]},{"name":"3532","type":1,"text":"Stripe Checkout is a payment page hosted by Stripe that users are redirected to in order to complete their purchase. Vue-Stripe-Checkout is a plugin that means Stripe Checkout can be added in just a few lines:","markups":[{"type":3,"start":117,"end":136,"href":"https://github.com/jofftiquez/vue-stripe-checkout","title":"","rel":"","anchorType":0}]},{"name":"c882","type":8,"text":"<stripe-checkout\n ref=\"sessionRef\"\n :pk=\"publishableKey\"\n :session-id=\"sessionId\"\n successUrl=\"http://localhost:8080#success\"\n cancelUrl=\"http://localhost:8080#cancel\"\n >\n    <template slot=\"checkout-button\">\n        <v-btn  @click=\"$refs.sessionRef.redirectToCheckout()\" v- show=\"!isLoadingSession\">Pay</v-btn>\n    </template>\n</stripe-checkout>","markups":[]},{"name":"87a9","type":1,"text":"The pricing page for this site looks like this:","markups":[]},{"name":"ffe7","type":4,"text":"SaaS Frontend Vue Checkout Component","markups":[],"layout":1,"metadata":{"id":"1*9VJ3WDeUNpWT6iqwW3nwFQ.png","originalWidth":1600,"originalHeight":895}},{"name":"d22d","type":1,"text":"When the user clicks pay they are redirected to the Stripe page which looks like this:","markups":[]},{"name":"8d27","type":4,"text":"Stripe Checkout Page for Power Subscription","markups":[],"layout":1,"metadata":{"id":"1*XvZoBgzv26uTmqW0xkBM3A.png","originalWidth":1600,"originalHeight":894}},{"name":"be6a","type":13,"text":"After Thoughts","markups":[]},{"name":"0962","type":1,"text":"This Architecture is a basis for creating your own SaaS. It would be great to extend this SaaS to cover:","markups":[]},{"name":"869e","type":9,"text":"processing unsuccessful subscription payments","markups":[]},{"name":"c574","type":9,"text":"connecting to social identity providers","markups":[]},{"name":"a0f0","type":3,"text":"Thanks for reading","markups":[]},{"name":"91dd","type":1,"text":"I hope you have enjoyed this article. If you like the style, check out T3chFlicks.org for more tech-focused educational content (YouTube, Instagram, Facebook, Twitter).","markups":[{"type":3,"start":71,"end":85,"href":"https://t3chflicks.org/Projects/aws-saas-quickstart","title":"","rel":"","anchorType":0},{"type":3,"start":129,"end":136,"href":"https://www.youtube.com/channel/UC0eSD-tdiJMI5GQTkMmZ-6w","title":"","rel":"noopener nofollow noopener noopener noopener","anchorType":0},{"type":3,"start":138,"end":147,"href":"https://www.instagram.com/t3chflicks/","title":"","rel":"noopener nofollow noopener noopener noopener","anchorType":0},{"type":3,"start":149,"end":157,"href":"https://www.facebook.com/t3chflicks","title":"","rel":"noopener nofollow noopener noopener noopener","anchorType":0},{"type":3,"start":159,"end":166,"href":"https://twitter.com/t3chflicks","title":"","rel":"noopener nofollow noopener noopener noopener","anchorType":0}]},{"name":"177a","type":7,"text":"The full code for this project can be found here ‚òÅÔ∏è","markups":[{"type":3,"start":0,"end":51,"href":"https://github.com/sk-t3ch/AWS_Stripe-SaaS-quickstart","title":"","rel":"","anchorType":0}]},{"name":"29e9","type":7,"text":"The live demo can be found here ‚ö°","markups":[{"type":3,"start":0,"end":33,"href":"https://saas-app.t3chflicks.org","title":"","rel":"","anchorType":0}]},{"name":"39c9","type":1,"text":"Resources:","markups":[]},{"name":"3071","type":9,"text":"https://chaosgears.com/lets-start-developing-using-vue-and-amplify/","markups":[{"type":3,"start":0,"end":67,"href":"https://chaosgears.com/lets-start-developing-using-vue-and-amplify/","title":"","rel":"noopener","anchorType":0}]},{"name":"12ef","type":9,"text":"https://docs.amplify.aws/lib/auth/getting-started/q/platform/js","markups":[{"type":3,"start":0,"end":63,"href":"https://docs.amplify.aws/lib/auth/getting-started/q/platform/js","title":"","rel":"noopener","anchorType":0}]},{"name":"6878","type":9,"text":"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification.html","markups":[{"type":3,"start":0,"end":101,"href":"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification.html","title":"","rel":"noopener","anchorType":0}]},{"name":"a5ac","type":9,"text":"https://www.youtube.com/watch?v=7dQZLY9-wL0","markups":[{"type":3,"start":0,"end":43,"href":"https://www.youtube.com/watch?v=7dQZLY9-wL0","title":"","rel":"nofollow noopener","anchorType":0}]}],"sections":[{"name":"78de","startIndex":0},{"name":"9e0f","startIndex":22}]},"postDisplay":{"coverless":true}},"virtuals":{"statusForCollection":"PENDING","allowNotes":true,"previewImage":{"imageId":"1*9RH_PC5EM5l0fM9wnEE97Q.png","filter":"","backgroundSize":"","originalWidth":2000,"originalHeight":2000,"strategy":"resample","height":0,"width":0},"wordCount":1156,"imageCount":6,"readingTime":5.312264150943396,"subtitle":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a‚Ä¶","userPostRelation":{"userId":"c6b26bf1493d","postId":"44bc4bb8388e","readAt":1613412645755,"readLaterAddedAt":0,"votedAt":0,"collaboratorAddedAt":0,"notesAddedAt":0,"subscribedAt":0,"lastReadSectionName":"9e0f","lastReadVersionId":"7cc16bbcf082","lastReadAt":1601069527380,"lastReadParagraphName":"cc0c","lastReadPercentage":0,"viewedAt":1613515879099,"presentedCountInResponseManagement":0,"clapCount":0,"seriesUpdateNotifsOptedInAt":0,"queuedAt":0,"seriesFirstViewedAt":0,"presentedCountInStream":45,"seriesLastViewedAt":0,"audioProgressSec":0},"publishedInCount":0,"usersBySocialRecommends":[],"noIndex":false,"recommends":2,"isBookmarked":false,"tags":[{"slug":"stripe","name":"Stripe","postCount":1069,"metadata":{"postCount":1069,"coverImage":{"id":"0*4UwufE5cCIl0Pv3C.jpg","originalWidth":1600,"originalHeight":900,"isFeatured":true}},"type":"Tag"},{"slug":"aws","name":"AWS","postCount":37888,"metadata":{"postCount":37888,"coverImage":{"id":"0*42Z-5KWIC6rknbul","originalWidth":5237,"originalHeight":3648,"isFeatured":true,"alt":"person in a pose that suggests they‚Äôre considering alternatives","unsplashPhotoId":"ryNmjBolkh0"}},"type":"Tag"},{"slug":"step-functions","name":"Step Functions","postCount":113,"metadata":{"postCount":113,"coverImage":{"id":"1*z_Fzs7hTNnMrJ-XSnmqq6g.png","originalWidth":862,"originalHeight":541,"isFeatured":true}},"type":"Tag"},{"slug":"payment-systems","name":"Payment Systems","postCount":507,"metadata":{"postCount":507,"coverImage":{"id":"1*TKObGFsHawnFI5KCPjsobA.png","originalWidth":1078,"originalHeight":645,"isFeatured":true}},"type":"Tag"},{"slug":"saas","name":"SaaS","postCount":21822,"metadata":{"postCount":21822,"coverImage":{"id":"0*JkgH6afjs7x_80_G.png","originalWidth":2048,"originalHeight":1274,"isFeatured":true}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":0,"links":{"entries":[{"url":"https://aws.amazon.com/step-functions/pricing/","alts":[],"httpStatus":200},{"url":"https://saas-app.t3chflicks.org","alts":[],"httpStatus":200},{"url":"https://t3chflicks.org/Projects/aws-saas-quickstart","alts":[],"httpStatus":200},{"url":"https://aws.amazon.com/step-functions","alts":[],"httpStatus":200},{"url":"https://docs.amplify.aws/lib/auth/getting-started/q/platform/js","alts":[],"httpStatus":200},{"url":"https://twitter.com/t3chflicks","alts":[],"httpStatus":400},{"url":"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification.html","alts":[],"httpStatus":200},{"url":"https://www.instagram.com/t3chflicks/","alts":[],"httpStatus":429},{"url":"https://www.facebook.com/t3chflicks","alts":[],"httpStatus":200},{"url":"https://www.youtube.com/channel/UC0eSD-tdiJMI5GQTkMmZ-6w","alts":[],"httpStatus":200},{"url":"https://github.com/sk-t3ch/AWS_Stripe-SaaS-quickstart","alts":[],"httpStatus":200},{"url":"https://github.com/jofftiquez/vue-stripe-checkout","alts":[],"httpStatus":200},{"url":"https://www.youtube.com/watch?v=7dQZLY9-wL0","alts":[],"httpStatus":429},{"url":"https://stripe.com/","alts":[],"httpStatus":200},{"url":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","alts":[{"type":3,"url":"medium://p/3ca7e3332565"},{"type":2,"url":"medium://p/3ca7e3332565"}],"httpStatus":200},{"url":"https://chaosgears.com/lets-start-developing-using-vue-and-amplify/","alts":[],"httpStatus":200}],"version":"0.3","generatedAt":1613412647385},"isLockedPreviewOnly":false,"metaDescription":"","totalClapCount":21,"sectionCount":2,"readingList":0,"topics":[{"topicId":"decb52b64abf","slug":"programming","createdAt":1493934116328,"deletedAt":0,"image":{"id":"1*iPa136b1cGEO7lvoXg6uHQ@2x.jpeg","originalWidth":6016,"originalHeight":4016},"name":"Programming","description":"The good, the bad, the buggy.","relatedTopics":[],"visibility":1,"relatedTags":[],"relatedTopicIds":[],"seoTitle":"Programming News and Articles‚Ää‚Äî‚ÄäMedium","type":"Topic"}]},"coverless":true,"slug":"pay-me-quickstart-for-creating-a-saas-pt-2-stripe-payments","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":false,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"pay-me-quickstart-for-creating-a-saas-pt-2-stripe-payments-44bc4bb8388e","previewContent":{"bodyModel":{"paragraphs":[{"name":"previewImage","type":4,"text":"","layout":10,"metadata":{"id":"1*9RH_PC5EM5l0fM9wnEE97Q.png","originalWidth":2000,"originalHeight":2000,"isFeatured":true}},{"name":"0d31","type":3,"text":"üí∏ Pay Me: Quickstart for creating a SaaS pt.2 ‚Äî Stripe Payments","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false,"subtitle":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a‚Ä¶"},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://medium.com/@t3chflicks/pay-me-quickstart-for-creating-a-saas-pt-2-stripe-payments-44bc4bb8388e","approvedHomeCollectionId":"","isNewsletter":false,"newsletterId":"","webCanonicalUrl":"https://medium.com/@t3chflicks/pay-me-quickstart-for-creating-a-saas-pt-2-stripe-payments-44bc4bb8388e","mediumUrl":"https://medium.com/@t3chflicks/pay-me-quickstart-for-creating-a-saas-pt-2-stripe-payments-44bc4bb8388e","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"audioVersionDurationSec":0,"sequenceId":"","isEligibleForRevenue":false,"isBlockedFromHightower":false,"deletedAt":0,"lockedPostSource":0,"hightowerMinimumGuaranteeStartsAt":0,"hightowerMinimumGuaranteeEndsAt":0,"featureLockRequestAcceptedAt":0,"mongerRequestType":1,"layerCake":0,"socialTitle":"","socialDek":"","editorialPreviewTitle":"","editorialPreviewDek":"","curationEligibleAt":0,"isProxyPost":false,"proxyPostFaviconUrl":"","proxyPostProviderName":"","proxyPostType":0,"isSuspended":false,"isLimitedState":false,"seoTitle":"","previewContent2":{"bodyModel":{"paragraphs":[{"name":"0d31","type":3,"text":"üí∏ Pay Me: Quickstart for creating a SaaS pt.2 ‚Äî Stripe Payments","markups":[]},{"name":"0890","type":1,"text":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a serverless SaaS on AWS. It uses the Stripe API and Vue-Checkout library to perform payments and manages users with Cognito, building on the architecture from part‚Ä¶","markups":[{"type":3,"start":288,"end":294,"href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","title":"","rel":"","anchorType":0},{"type":3,"start":310,"end":322,"href":"https://saas-app.t3chflicks.org","title":"","rel":"","anchorType":0}]}],"sections":[{"name":"78de","startIndex":0}]},"isFullContent":false,"subtitle":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a‚Ä¶"},"cardType":0,"isDistributionAlertDismissed":false,"isShortform":false,"shortformType":0,"responsesLocked":false,"isLockedResponse":false,"isPublishToEmail":false,"responseDistribution":0,"type":"Post"},"mentionedUsers":[],"collaborators":[{"user":{"userId":"e59bc55150ab","name":"James Turner","username":"james-turner","createdAt":1525938352051,"imageId":"1*xiYORt7xKkmbNFAZgS1s1w.jpeg","backgroundImageId":"","bio":"Data Engineer, Data Ops, and Machine Learner","twitterScreenName":"","allowNotes":1,"mediumMemberAt":0,"isWriterProgramEnrolled":true,"isSuspended":false,"isMembershipTrialEligible":true,"optInToIceland":false,"subdomainCreatedAt":1604872063568,"hasCompletedProfile":false,"isCreatorPartnerProgramEnrolled":true,"userDismissableFlags":[2,1],"hasSeenIcelandOnboarding":false,"type":"User"},"state":"visible"}],"hideMeter":false,"shareKey":"e9abb54fed93e0282b8d36d7e565ba59","collectionUserRelations":[{"collectionId":"f5af2b715248","userId":"c6b26bf1493d","role":"WRITER"}],"mode":"canEdit","references":{"User":{"c6b26bf1493d":{"userId":"c6b26bf1493d","name":"T3ch Flicks","username":"t3chflicks","createdAt":1547294877991,"imageId":"0*-jTYH2BU5vpv2poq.jpg","backgroundImageId":"","bio":"A tech focused education and services company. Find us at https://t3chflicks.org.","twitterScreenName":"t3chflicks","socialStats":{"userId":"c6b26bf1493d","usersFollowedCount":20,"usersFollowedByCount":29,"type":"SocialStats"},"social":{"userId":"c6b26bf1493d","targetUserId":"c6b26bf1493d","type":"Social"},"allowNotes":1,"mediumMemberAt":1565798099000,"isWriterProgramEnrolled":true,"isSuspended":false,"isMembershipTrialEligible":true,"optInToIceland":false,"subdomainCreatedAt":1603669189510,"hasCompletedProfile":false,"isCreatorPartnerProgramEnrolled":true,"userDismissableFlags":[2,1],"hasSeenIcelandOnboarding":false,"type":"User"}},"Collection":{"f5af2b715248":{"id":"f5af2b715248","name":"The Startup","slug":"swlh","tags":["STARTUP","TECH","ENTREPRENEURSHIP","DESIGN","LIFE"],"creatorId":"d43c46db5b92","description":"Medium's largest active publication, followed by +766K people. Follow to join our community.","shortDescription":"Medium's largest active publication, followed by +766K‚Ä¶","image":{"imageId":"1*Xd2uZaVHfrGOP14W_3UQRg.jpeg","filter":"","backgroundSize":"","originalWidth":1832,"originalHeight":1832,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":767813,"activeAt":1613514458606},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":true,"canRemove":true,"canManageAll":false,"canSubmit":true,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":true,"canViewCloaked":true,"canEditOwnPosts":true,"canBeAssignedAuthor":true,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":true,"canViewNewsletterV2Stats":false,"canCreateNewsletterV3":false},"isSubscribed":true,"isEnrolledInHightower":false,"isEligibleForHightower":false,"isSubscribedToCollectionEmails":true,"isMuted":false,"canToggleEmail":true},"logo":{"imageId":"1*IOJrKVmLnRcFz3E_KrrN_Q.png","filter":"","backgroundSize":"","originalWidth":607,"originalHeight":104,"strategy":"resample","height":0,"width":0},"twitterUsername":"thestartup_","collectionMastheadId":"e142c0e64791","sections":[{"type":2,"collectionHeaderMetadata":{"backgroundImage":{},"logoImage":{"id":"1*pempph-OAqpRKG5v1-yisg@2x.png","originalWidth":940,"originalHeight":832,"alt":"The Startup"},"alignment":1,"layout":6}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["6b48eeed6dee","79b4c834dcd9","565c364231e6"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["95b34b258403","238e7b04f3e9","bd2a4829f36b"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["e9be232280aa","86d2bce1c711","123d6ae31b6"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["35c763c92f62","78ddb6776b70","30dd6fb21664"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["206aa8773b16","78ddb6776b70","448413c0350"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["4575193db335","ae903a9fb8fb","a1f2e25db627"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["d4f4828c8781","3cae59976233","a009af88f66a"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":10,"postIds":["8d5beb95ef4a","95b8741aecaa","cf0f1a99e201","d6ecf9d02009","bbda8509e59a","e4cf582d6b9f","502e483fd161","fad43dc9fc3d","59a8c569f915"]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":6,"postIds":[],"sectionHeader":"HOT-OFF-THE-PRESS"}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":2,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":1,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":15,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":5,"postIds":[]}},{"type":1,"postListMetadata":{"source":2,"layout":4,"number":11,"postIds":[],"sectionHeader":"Trending"}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":25,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":25,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":23,"postIds":[],"sectionHeader":"Latest"}}],"tintColor":"#FFF9F9F9","lightText":false,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF848585","point":0},{"color":"#FF7B7B7B","point":0.1},{"color":"#FF717272","point":0.2},{"color":"#FF686868","point":0.3},{"color":"#FF5E5E5E","point":0.4},{"color":"#FF545454","point":0.5},{"color":"#FF494A4A","point":0.6},{"color":"#FF3F3F3F","point":0.7},{"color":"#FF333333","point":0.8},{"color":"#FF272727","point":0.9},{"color":"#FF1A1A1A","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FFF9F9F9","point":0},{"color":"#FFE7E7E7","point":0.1},{"color":"#FFD4D4D4","point":0.2},{"color":"#FFC1C1C1","point":0.3},{"color":"#FFADADAE","point":0.4},{"color":"#FF989999","point":0.5},{"color":"#FF838484","point":0.6},{"color":"#FF6D6E6E","point":0.7},{"color":"#FF565757","point":0.8},{"color":"#FF3C3E3E","point":0.9},{"color":"#FF202122","point":1}],"backgroundColor":"#FFF9F9F9"},"highlightSpectrum":{"colorPoints":[{"color":"#FFF4F2F2","point":0},{"color":"#FFF2F0F0","point":0.1},{"color":"#FFF0EEEE","point":0.2},{"color":"#FFEEECEC","point":0.3},{"color":"#FFECEBEA","point":0.4},{"color":"#FFEAE9E8","point":0.5},{"color":"#FFE8E7E7","point":0.6},{"color":"#FFE6E5E5","point":0.7},{"color":"#FFE4E3E3","point":0.8},{"color":"#FFE2E1E1","point":0.9},{"color":"#FFE0DFDF","point":1}],"backgroundColor":"#FFFFFFFF"},"darkBackgroundSpectrum":{"colorPoints":[{"color":"#FF9C9D9D","point":0},{"color":"#FFA5A5A5","point":0.1},{"color":"#FFADAEAE","point":0.2},{"color":"#FFB6B6B6","point":0.3},{"color":"#FFBFBEBE","point":0.4},{"color":"#FFC7C6C6","point":0.5},{"color":"#FFCFCECE","point":0.6},{"color":"#FFD8D6D6","point":0.7},{"color":"#FFE0DEDE","point":0.8},{"color":"#FFE8E6E6","point":0.9},{"color":"#FFF0EEED","point":1}],"backgroundColor":"#FF000000"}},"navItems":[{"type":2,"title":"Submit","postId":"3e8ed27bcd3e","url":"https://medium.com/swlh/when-one-upvote-is-worth-a-thousand-visitors-3e8ed27bcd3e","source":"postId"},{"type":3,"title":"Get smarter at writing","url":"https://medium.com/blankpage"}],"colorBehavior":2,"acceleratedMobilePagesState":0,"collectionFeatures":[30],"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"backgroundImage":{},"logoImage":{"id":"1*pempph-OAqpRKG5v1-yisg@2x.png","originalWidth":940,"originalHeight":832,"alt":"The Startup"},"alignment":1,"layout":6},"subscriberCount":767813,"tagline":"Medium's largest active publication, followed by +766K people. Follow to join our community.","isOptedIntoAurora":false,"newsletterV3":{"newsletterV3Id":"13df37cfc4c2","type":1,"name":"Top Stories","description":"The Startup's best stories delivered straight into your inbox, once a month.","collectionId":"f5af2b715248","newsletterSlug":"top-stories","isSubscribed":true,"showPromo":false,"avatarImageId":"1*_LcCftWqVwMNbRkNW29XFw.jpeg","creatorId":"d43c46db5b92","showNewsletterPostsInCollectionHome":false,"exportableSubscribersCount":2777,"subscribersCount":210006},"isCurationAllowedByDefault":false,"polarisCoverImage":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"type":"Collection"}},"Social":{"c6b26bf1493d":{"userId":"c6b26bf1493d","targetUserId":"c6b26bf1493d","type":"Social"}},"SocialStats":{"c6b26bf1493d":{"userId":"c6b26bf1493d","usersFollowedCount":20,"usersFollowedByCount":29,"type":"SocialStats"}}}},"v":3,"b":"20210216-2103-root"}
])}while(1);</x>{"success":true,"payload":{"value":{"id":"44bc4bb8388e","versionId":"6e2c0d90b159","creatorId":"c6b26bf1493d","homeCollectionId":"f5af2b715248","title":"üí∏ Pay Me: Quickstart for creating a SaaS pt.2‚Ää‚Äî‚ÄäStripe Payments","detectedLanguage":"en","latestVersion":"6e2c0d90b159","latestPublishedVersion":"6e2c0d90b159","hasUnpublishedEdits":false,"latestRev":2544,"createdAt":1595862538286,"updatedAt":1613412656890,"acceptedAt":0,"firstPublishedAt":1599420742552,"latestPublishedAt":1613412645644,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a‚Ä¶","bodyModel":{"paragraphs":[{"name":"0d31","type":3,"text":"üí∏ Pay Me: Quickstart for creating a SaaS pt.2 ‚Äî Stripe Payments","markups":[]},{"name":"0890","type":1,"text":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a serverless SaaS on AWS. It uses the Stripe API and Vue-Checkout library to perform payments and manages users with Cognito, building on the architecture from part 1. Check out the live demo üíΩ.","markups":[{"type":3,"start":288,"end":294,"href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","title":"","rel":"","anchorType":0},{"type":3,"start":310,"end":322,"href":"https://saas-app.t3chflicks.org","title":"","rel":"","anchorType":0}]},{"name":"18ab","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*9RH_PC5EM5l0fM9wnEE97Q.png","originalWidth":2000,"originalHeight":2000,"isFeatured":true}},{"name":"787c","type":1,"text":"Payments systems are a complex but necessary part of running a SaaS. Turning to a payment service side-steps most of the complexity and responsibility, but usually costs a percentage or flat fee for each transaction. Stripe offers payment system solution and charges 1.4%+20p for European cards and 2.9%+20p for for non-European cards per transaction. Stripe also has other useful features such as:","markups":[{"type":3,"start":217,"end":223,"href":"https://stripe.com/","title":"","rel":"","anchorType":0}],"hasDropCap":true},{"name":"07e1","type":9,"text":"customer management, including storing payment details","markups":[]},{"name":"3870","type":9,"text":"manage products and prices","markups":[]},{"name":"668f","type":9,"text":"create payments and subscriptions","markups":[]},{"name":"e01e","type":9,"text":"dashboards and insights","markups":[]},{"name":"75f4","type":1,"text":"In this article, I will demonstrate integrating Stripe‚Äôs payment solution and how to store user details, make subscriptions and instant payments. In a previous article, I demonstrated how to create a SaaS user management application which allows users to manage their API key and monitor usage.","markups":[]},{"name":"9011","type":14,"text":"üö´ Users Only: Quickstart for creating a SaaS pt. 1 ‚Äî User Management\nManaging users and API keys is a necessary task for creating a Software as a Service (SaaS). In this article, I‚Ä¶medium.com","markups":[{"type":3,"start":0,"end":192,"href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","title":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","rel":"","anchorType":0},{"type":1,"start":0,"end":69},{"type":2,"start":70,"end":182}],"mixtapeMetadata":{"mediaResourceId":"30fc735a8c8523ba8cdd479c1daf6eb1","thumbnailImageId":"1*9RH_PC5EM5l0fM9wnEE97Q.png","href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565"}},{"name":"fe3b","type":1,"text":"I want to limit the number of requests a user can make per month and scale that with an amount of money that would make the SaaS profitable. I have chosen to use credits instead of number of requests to open up the possibility of having multiple services which might be more costly to run. This also allows you to charge multiple credits.","markups":[]},{"name":"6905","type":1,"text":"I have divided plans up into three tiers which can be subscribed to or as pay-as-you-go:","markups":[]},{"name":"ca64","type":9,"text":"Free ‚Äî 50 Credits per week","markups":[{"type":2,"start":0,"end":4}]},{"name":"4195","type":9,"text":"Basic ‚Äî1,000 Credits per month","markups":[{"type":2,"start":0,"end":5}]},{"name":"98f0","type":9,"text":"Power ‚Äî 100,000 Credits per month","markups":[{"type":2,"start":0,"end":5}]},{"name":"19fa","type":6,"text":"In a future article, I hope to investigate the cost of the architecture per user to determine a fair price for the service.","markups":[{"type":2,"start":0,"end":123}]},{"name":"9ba4","type":1,"text":"Stripe offers both the ability to make instant payments and subscriptions. Your products and prices must be stored on the Stripe service and when a purchase is successfully completed, Stripe will notify you using a web hook that you define. This web hook is called on subscription payment being successful too.","markups":[]},{"name":"bc5d","type":1,"text":"The architecture extends upon the previous User Manager App with another DynamoDB table to store products, a checkout function on the User API, a Stripe web hook API, and a State machine to manage users‚Äô credit.","markups":[]},{"name":"6f92","type":4,"text":"SaaS Architecture Diagram","markups":[],"layout":1,"metadata":{"id":"1*lvDDAutc-VL-sFUzYZxCng.png","originalWidth":1028,"originalHeight":801}},{"name":"8a3a","type":7,"text":"The full code for this project can be found here ‚òÅÔ∏è","markups":[{"type":3,"start":0,"end":51,"href":"https://github.com/sk-t3ch/AWS_Stripe-SaaS-quickstart","title":"","rel":"","anchorType":0}]},{"name":"a13f","type":7,"text":"The live demo can be found here üíΩ","markups":[{"type":3,"start":0,"end":34,"href":"https://saas-app.t3chflicks.org","title":"","rel":"","anchorType":0}]},{"name":"c055","type":4,"text":"Video of User buying subscription with SaaS App","markups":[],"layout":1,"metadata":{"id":"1*VJ5IjcLZ8taS1JKt0Gib_g.gif","originalWidth":800,"originalHeight":436}},{"name":"2aa1","type":3,"text":"Let‚Äôs Build! üî©","markups":[]},{"name":"9160","type":3,"text":"Backend","markups":[]},{"name":"44af","type":13,"text":"Credit","markups":[]},{"name":"db92","type":1,"text":"User credit is managed using a State Machine. The Cognito post-confirmation hook trigger a Lambda to create a user and begin an execution of the State Machine with the Free plan.","markups":[{"type":3,"start":31,"end":44,"href":"https://aws.amazon.com/step-functions","title":"","rel":"","anchorType":0},{"type":2,"start":168,"end":173}]},{"name":"250c","type":4,"text":"User Management State Machine","markups":[],"layout":1,"metadata":{"id":"1*vwxGotYkwlGmvkZD6cwalA.png","originalWidth":306,"originalHeight":319}},{"name":"529c","type":1,"text":"State Machines offer the ability to wait a specific amount of time and this does not cost. This allows us to periodically add credits to users on the Free plan. This is a requirement as this plan is not purchased and therefore cannot use the Stripe web hook as a trigger to add credits (see later).","markups":[{"type":2,"start":150,"end":154}]},{"name":"c8b3","type":1,"text":"Using a State Machines to construct flows means that extensions are easily added, such as sending email alerts. The cost of a standard State Machine is $0.025 per thousand state transitions. In the above State Machine, a free user would cost $0.025/1000 * 3 = $0.000075 per User per week ‚Äî not including the Lambda fees. There is also a limit of 25,000 executions at a time.","markups":[{"type":3,"start":126,"end":134,"href":"https://aws.amazon.com/step-functions/pricing/","title":"","rel":"","anchorType":0}]},{"name":"1cee","type":13,"text":"Product Table","markups":[]},{"name":"d3eb","type":1,"text":"Stripe allows you to create products which can have multiple prices. This is particularly useful for SaaS where you may offer the same product as an instant buy or recurring subscription.","markups":[]},{"name":"db8a","type":1,"text":"I have defined the products in a JSON file and attempted to sync this details with both Stripe and a DynamoDB table using the following script:","markups":[]},{"name":"3db1","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"1b12f72286c86cb9a91a720dc4b57cc3","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"045a","type":13,"text":"User API","markups":[]},{"name":"cc0c","type":1,"text":"The previous User Management system from part 1 has:","markups":[{"type":3,"start":41,"end":47,"href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","title":"","rel":"","anchorType":0}]},{"name":"86b6","type":1,"text":"/generate-key ‚Äî this regenerates the User‚Äôs API key","markups":[{"type":10,"start":0,"end":13}]},{"name":"eacf","type":1,"text":"/user ‚Äî returns details like API key, last Update time, and subscription Plan","markups":[{"type":10,"start":0,"end":5}]},{"name":"7825","type":1,"text":"This is extended with:","markups":[]},{"name":"571c","type":1,"text":"/create-session","markups":[{"type":10,"start":0,"end":15}]},{"name":"e871","type":1,"text":"/cancel-subscriptions","markups":[{"type":10,"start":0,"end":21}]},{"name":"85ab","type":13,"text":"Create Session","markups":[]},{"name":"b9e1","type":1,"text":"The Stripe-checkout frontend component requires a session-Id to initiate the payment sequence.","markups":[]},{"name":"08e3","type":1,"text":"When the user selects a product on the frontend, a request is sent to the /create-session endpoint where following function is run:","markups":[{"type":10,"start":74,"end":89}]},{"name":"8011","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"bc634acb74036ceb5fccd1dba3aa5d8a","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"185a","type":1,"text":"When creating a session, you can also attach meta-data. This data is accessible on the resultant success object of the payment sent by Stripe to your web hook.","markups":[{"type":10,"start":45,"end":54}]},{"name":"7a4e","type":13,"text":"Cancel Subscriptions","markups":[]},{"name":"3908","type":1,"text":"Users should be able to cancel their subscription to the SaaS at any time. In this example, selecting the Free plan in the frontend cancels all other subscriptions. This is achieved simply by referencing a customer id on a cancel call to Stipe.","markups":[{"type":2,"start":106,"end":110}]},{"name":"62c9","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"e7d9486e1b760c95bcc696ebb57317ad","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"3780","type":13,"text":"WebHook API","markups":[]},{"name":"7de7","type":1,"text":"Stripe sends transaction events to a web hook which you must create and define using the Stripe API:","markups":[]},{"name":"8dc3","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"d23feaac37d19ce6e95644f9880954ab","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"6087","type":1,"text":"Once you have defined the web hook, the secret is used in the following Lambda function which processes the successful charge events:","markups":[]},{"name":"413d","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"608e4cb5fcf3c935c5861a081dc40192","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"fd58","type":1,"text":"Again, I have added open CORS whilst developing. For security, these should been locked down so that only Stripe can call this API.","markups":[]},{"name":"2bf2","type":13,"text":"Test API","markups":[]},{"name":"9fb1","type":1,"text":"The test service API still uses the user‚Äôs API key for a query on a GSI of the User table to get the username and credit count. The credit field is decremented every time a request is made to the service.","markups":[]},{"name":"8fbe","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"8efd9f3e843404791b1ad8666632c55a","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"e557","type":3,"text":"Frontend","markups":[]},{"name":"e1d2","type":1,"text":"The frontend is created using Vue JS with the AWS Amplify package and components ‚Äî this is described in the pevious User Manager App from part 1. Here, we add the ability to make payments.","markups":[{"type":3,"start":138,"end":144,"href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","title":"","rel":"","anchorType":0}]},{"name":"a7b9","type":13,"text":"Stripe Checkout","markups":[]},{"name":"3532","type":1,"text":"Stripe Checkout is a payment page hosted by Stripe that users are redirected to in order to complete their purchase. Vue-Stripe-Checkout is a plugin that means Stripe Checkout can be added in just a few lines:","markups":[{"type":3,"start":117,"end":136,"href":"https://github.com/jofftiquez/vue-stripe-checkout","title":"","rel":"","anchorType":0}]},{"name":"c882","type":8,"text":"<stripe-checkout\n ref=\"sessionRef\"\n :pk=\"publishableKey\"\n :session-id=\"sessionId\"\n successUrl=\"http://localhost:8080#success\"\n cancelUrl=\"http://localhost:8080#cancel\"\n >\n    <template slot=\"checkout-button\">\n        <v-btn  @click=\"$refs.sessionRef.redirectToCheckout()\" v- show=\"!isLoadingSession\">Pay</v-btn>\n    </template>\n</stripe-checkout>","markups":[]},{"name":"87a9","type":1,"text":"The pricing page for this site looks like this:","markups":[]},{"name":"ffe7","type":4,"text":"SaaS Frontend Vue Checkout Component","markups":[],"layout":1,"metadata":{"id":"1*9VJ3WDeUNpWT6iqwW3nwFQ.png","originalWidth":1600,"originalHeight":895}},{"name":"d22d","type":1,"text":"When the user clicks pay they are redirected to the Stripe page which looks like this:","markups":[]},{"name":"8d27","type":4,"text":"Stripe Checkout Page for Power Subscription","markups":[],"layout":1,"metadata":{"id":"1*XvZoBgzv26uTmqW0xkBM3A.png","originalWidth":1600,"originalHeight":894}},{"name":"be6a","type":13,"text":"After Thoughts","markups":[]},{"name":"0962","type":1,"text":"This Architecture is a basis for creating your own SaaS. It would be great to extend this SaaS to cover:","markups":[]},{"name":"869e","type":9,"text":"processing unsuccessful subscription payments","markups":[]},{"name":"c574","type":9,"text":"connecting to social identity providers","markups":[]},{"name":"a0f0","type":3,"text":"Thanks for reading","markups":[]},{"name":"91dd","type":1,"text":"I hope you have enjoyed this article. If you like the style, check out T3chFlicks.org for more tech-focused educational content (YouTube, Instagram, Facebook, Twitter).","markups":[{"type":3,"start":71,"end":85,"href":"https://t3chflicks.org/Projects/aws-saas-quickstart","title":"","rel":"","anchorType":0},{"type":3,"start":129,"end":136,"href":"https://www.youtube.com/channel/UC0eSD-tdiJMI5GQTkMmZ-6w","title":"","rel":"noopener nofollow noopener noopener noopener","anchorType":0},{"type":3,"start":138,"end":147,"href":"https://www.instagram.com/t3chflicks/","title":"","rel":"noopener nofollow noopener noopener noopener","anchorType":0},{"type":3,"start":149,"end":157,"href":"https://www.facebook.com/t3chflicks","title":"","rel":"noopener nofollow noopener noopener noopener","anchorType":0},{"type":3,"start":159,"end":166,"href":"https://twitter.com/t3chflicks","title":"","rel":"noopener nofollow noopener noopener noopener","anchorType":0}]},{"name":"177a","type":7,"text":"The full code for this project can be found here ‚òÅÔ∏è","markups":[{"type":3,"start":0,"end":51,"href":"https://github.com/sk-t3ch/AWS_Stripe-SaaS-quickstart","title":"","rel":"","anchorType":0}]},{"name":"29e9","type":7,"text":"The live demo can be found here ‚ö°","markups":[{"type":3,"start":0,"end":33,"href":"https://saas-app.t3chflicks.org","title":"","rel":"","anchorType":0}]},{"name":"39c9","type":1,"text":"Resources:","markups":[]},{"name":"3071","type":9,"text":"https://chaosgears.com/lets-start-developing-using-vue-and-amplify/","markups":[{"type":3,"start":0,"end":67,"href":"https://chaosgears.com/lets-start-developing-using-vue-and-amplify/","title":"","rel":"noopener","anchorType":0}]},{"name":"12ef","type":9,"text":"https://docs.amplify.aws/lib/auth/getting-started/q/platform/js","markups":[{"type":3,"start":0,"end":63,"href":"https://docs.amplify.aws/lib/auth/getting-started/q/platform/js","title":"","rel":"noopener","anchorType":0}]},{"name":"6878","type":9,"text":"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification.html","markups":[{"type":3,"start":0,"end":101,"href":"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification.html","title":"","rel":"noopener","anchorType":0}]},{"name":"a5ac","type":9,"text":"https://www.youtube.com/watch?v=7dQZLY9-wL0","markups":[{"type":3,"start":0,"end":43,"href":"https://www.youtube.com/watch?v=7dQZLY9-wL0","title":"","rel":"nofollow noopener","anchorType":0}]}],"sections":[{"name":"78de","startIndex":0},{"name":"9e0f","startIndex":22}]},"postDisplay":{"coverless":true}},"virtuals":{"statusForCollection":"PENDING","allowNotes":true,"previewImage":{"imageId":"1*9RH_PC5EM5l0fM9wnEE97Q.png","filter":"","backgroundSize":"","originalWidth":2000,"originalHeight":2000,"strategy":"resample","height":0,"width":0},"wordCount":1156,"imageCount":6,"readingTime":5.312264150943396,"subtitle":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a‚Ä¶","userPostRelation":{"userId":"c6b26bf1493d","postId":"44bc4bb8388e","readAt":1613412645755,"readLaterAddedAt":0,"votedAt":0,"collaboratorAddedAt":0,"notesAddedAt":0,"subscribedAt":0,"lastReadSectionName":"9e0f","lastReadVersionId":"7cc16bbcf082","lastReadAt":1601069527380,"lastReadParagraphName":"cc0c","lastReadPercentage":0,"viewedAt":1613515879099,"presentedCountInResponseManagement":0,"clapCount":0,"seriesUpdateNotifsOptedInAt":0,"queuedAt":0,"seriesFirstViewedAt":0,"presentedCountInStream":45,"seriesLastViewedAt":0,"audioProgressSec":0},"publishedInCount":0,"usersBySocialRecommends":[],"noIndex":false,"recommends":2,"isBookmarked":false,"tags":[{"slug":"stripe","name":"Stripe","postCount":1069,"metadata":{"postCount":1069,"coverImage":{"id":"0*4UwufE5cCIl0Pv3C.jpg","originalWidth":1600,"originalHeight":900,"isFeatured":true}},"type":"Tag"},{"slug":"aws","name":"AWS","postCount":37888,"metadata":{"postCount":37888,"coverImage":{"id":"0*42Z-5KWIC6rknbul","originalWidth":5237,"originalHeight":3648,"isFeatured":true,"alt":"person in a pose that suggests they‚Äôre considering alternatives","unsplashPhotoId":"ryNmjBolkh0"}},"type":"Tag"},{"slug":"step-functions","name":"Step Functions","postCount":113,"metadata":{"postCount":113,"coverImage":{"id":"1*z_Fzs7hTNnMrJ-XSnmqq6g.png","originalWidth":862,"originalHeight":541,"isFeatured":true}},"type":"Tag"},{"slug":"payment-systems","name":"Payment Systems","postCount":507,"metadata":{"postCount":507,"coverImage":{"id":"1*TKObGFsHawnFI5KCPjsobA.png","originalWidth":1078,"originalHeight":645,"isFeatured":true}},"type":"Tag"},{"slug":"saas","name":"SaaS","postCount":21822,"metadata":{"postCount":21822,"coverImage":{"id":"0*JkgH6afjs7x_80_G.png","originalWidth":2048,"originalHeight":1274,"isFeatured":true}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":0,"links":{"entries":[{"url":"https://aws.amazon.com/step-functions/pricing/","alts":[],"httpStatus":200},{"url":"https://saas-app.t3chflicks.org","alts":[],"httpStatus":200},{"url":"https://t3chflicks.org/Projects/aws-saas-quickstart","alts":[],"httpStatus":200},{"url":"https://aws.amazon.com/step-functions","alts":[],"httpStatus":200},{"url":"https://docs.amplify.aws/lib/auth/getting-started/q/platform/js","alts":[],"httpStatus":200},{"url":"https://twitter.com/t3chflicks","alts":[],"httpStatus":400},{"url":"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification.html","alts":[],"httpStatus":200},{"url":"https://www.instagram.com/t3chflicks/","alts":[],"httpStatus":429},{"url":"https://www.facebook.com/t3chflicks","alts":[],"httpStatus":200},{"url":"https://www.youtube.com/channel/UC0eSD-tdiJMI5GQTkMmZ-6w","alts":[],"httpStatus":200},{"url":"https://github.com/sk-t3ch/AWS_Stripe-SaaS-quickstart","alts":[],"httpStatus":200},{"url":"https://github.com/jofftiquez/vue-stripe-checkout","alts":[],"httpStatus":200},{"url":"https://www.youtube.com/watch?v=7dQZLY9-wL0","alts":[],"httpStatus":429},{"url":"https://stripe.com/","alts":[],"httpStatus":200},{"url":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","alts":[{"type":3,"url":"medium://p/3ca7e3332565"},{"type":2,"url":"medium://p/3ca7e3332565"}],"httpStatus":200},{"url":"https://chaosgears.com/lets-start-developing-using-vue-and-amplify/","alts":[],"httpStatus":200}],"version":"0.3","generatedAt":1613412647385},"isLockedPreviewOnly":false,"metaDescription":"","totalClapCount":21,"sectionCount":2,"readingList":0,"topics":[{"topicId":"decb52b64abf","slug":"programming","createdAt":1493934116328,"deletedAt":0,"image":{"id":"1*iPa136b1cGEO7lvoXg6uHQ@2x.jpeg","originalWidth":6016,"originalHeight":4016},"name":"Programming","description":"The good, the bad, the buggy.","relatedTopics":[],"visibility":1,"relatedTags":[],"relatedTopicIds":[],"seoTitle":"Programming News and Articles‚Ää‚Äî‚ÄäMedium","type":"Topic"}]},"coverless":true,"slug":"pay-me-quickstart-for-creating-a-saas-pt-2-stripe-payments","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":false,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"pay-me-quickstart-for-creating-a-saas-pt-2-stripe-payments-44bc4bb8388e","previewContent":{"bodyModel":{"paragraphs":[{"name":"previewImage","type":4,"text":"","layout":10,"metadata":{"id":"1*9RH_PC5EM5l0fM9wnEE97Q.png","originalWidth":2000,"originalHeight":2000,"isFeatured":true}},{"name":"0d31","type":3,"text":"üí∏ Pay Me: Quickstart for creating a SaaS pt.2 ‚Äî Stripe Payments","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false,"subtitle":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a‚Ä¶"},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://medium.com/@t3chflicks/pay-me-quickstart-for-creating-a-saas-pt-2-stripe-payments-44bc4bb8388e","approvedHomeCollectionId":"","isNewsletter":false,"newsletterId":"","webCanonicalUrl":"https://medium.com/@t3chflicks/pay-me-quickstart-for-creating-a-saas-pt-2-stripe-payments-44bc4bb8388e","mediumUrl":"https://medium.com/@t3chflicks/pay-me-quickstart-for-creating-a-saas-pt-2-stripe-payments-44bc4bb8388e","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"audioVersionDurationSec":0,"sequenceId":"","isEligibleForRevenue":false,"isBlockedFromHightower":false,"deletedAt":0,"lockedPostSource":0,"hightowerMinimumGuaranteeStartsAt":0,"hightowerMinimumGuaranteeEndsAt":0,"featureLockRequestAcceptedAt":0,"mongerRequestType":1,"layerCake":0,"socialTitle":"","socialDek":"","editorialPreviewTitle":"","editorialPreviewDek":"","curationEligibleAt":0,"isProxyPost":false,"proxyPostFaviconUrl":"","proxyPostProviderName":"","proxyPostType":0,"isSuspended":false,"isLimitedState":false,"seoTitle":"","previewContent2":{"bodyModel":{"paragraphs":[{"name":"0d31","type":3,"text":"üí∏ Pay Me: Quickstart for creating a SaaS pt.2 ‚Äî Stripe Payments","markups":[]},{"name":"0890","type":1,"text":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a serverless SaaS on AWS. It uses the Stripe API and Vue-Checkout library to perform payments and manages users with Cognito, building on the architecture from part‚Ä¶","markups":[{"type":3,"start":288,"end":294,"href":"https://medium.com/@t3chflicks/users-only-quickstart-for-creating-a-saas-pt-1-user-management-3ca7e3332565","title":"","rel":"","anchorType":0},{"type":3,"start":310,"end":322,"href":"https://saas-app.t3chflicks.org","title":"","rel":"","anchorType":0}]}],"sections":[{"name":"78de","startIndex":0}]},"isFullContent":false,"subtitle":"Creating a SaaS solution is fun, but creating a payment system can be a minefield. In this article, I demonstrate how to create a‚Ä¶"},"cardType":0,"isDistributionAlertDismissed":false,"isShortform":false,"shortformType":0,"responsesLocked":false,"isLockedResponse":false,"isPublishToEmail":false,"responseDistribution":0,"type":"Post"},"mentionedUsers":[],"collaborators":[{"user":{"userId":"e59bc55150ab","name":"James Turner","username":"james-turner","createdAt":1525938352051,"imageId":"1*xiYORt7xKkmbNFAZgS1s1w.jpeg","backgroundImageId":"","bio":"Data Engineer, Data Ops, and Machine Learner","twitterScreenName":"","allowNotes":1,"mediumMemberAt":0,"isWriterProgramEnrolled":true,"isSuspended":false,"isMembershipTrialEligible":true,"optInToIceland":false,"subdomainCreatedAt":1604872063568,"hasCompletedProfile":false,"isCreatorPartnerProgramEnrolled":true,"userDismissableFlags":[2,1],"hasSeenIcelandOnboarding":false,"type":"User"},"state":"visible"}],"hideMeter":false,"shareKey":"e9abb54fed93e0282b8d36d7e565ba59","collectionUserRelations":[{"collectionId":"f5af2b715248","userId":"c6b26bf1493d","role":"WRITER"}],"mode":"canEdit","references":{"User":{"c6b26bf1493d":{"userId":"c6b26bf1493d","name":"T3ch Flicks","username":"t3chflicks","createdAt":1547294877991,"imageId":"0*-jTYH2BU5vpv2poq.jpg","backgroundImageId":"","bio":"A tech focused education and services company. Find us at https://t3chflicks.org.","twitterScreenName":"t3chflicks","socialStats":{"userId":"c6b26bf1493d","usersFollowedCount":20,"usersFollowedByCount":29,"type":"SocialStats"},"social":{"userId":"c6b26bf1493d","targetUserId":"c6b26bf1493d","type":"Social"},"allowNotes":1,"mediumMemberAt":1565798099000,"isWriterProgramEnrolled":true,"isSuspended":false,"isMembershipTrialEligible":true,"optInToIceland":false,"subdomainCreatedAt":1603669189510,"hasCompletedProfile":false,"isCreatorPartnerProgramEnrolled":true,"userDismissableFlags":[2,1],"hasSeenIcelandOnboarding":false,"type":"User"}},"Collection":{"f5af2b715248":{"id":"f5af2b715248","name":"The Startup","slug":"swlh","tags":["STARTUP","TECH","ENTREPRENEURSHIP","DESIGN","LIFE"],"creatorId":"d43c46db5b92","description":"Medium's largest active publication, followed by +766K people. Follow to join our community.","shortDescription":"Medium's largest active publication, followed by +766K‚Ä¶","image":{"imageId":"1*Xd2uZaVHfrGOP14W_3UQRg.jpeg","filter":"","backgroundSize":"","originalWidth":1832,"originalHeight":1832,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":767813,"activeAt":1613514458606},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":true,"canRemove":true,"canManageAll":false,"canSubmit":true,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":true,"canViewCloaked":true,"canEditOwnPosts":true,"canBeAssignedAuthor":true,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":true,"canViewNewsletterV2Stats":false,"canCreateNewsletterV3":false},"isSubscribed":true,"isEnrolledInHightower":false,"isEligibleForHightower":false,"isSubscribedToCollectionEmails":true,"isMuted":false,"canToggleEmail":true},"logo":{"imageId":"1*IOJrKVmLnRcFz3E_KrrN_Q.png","filter":"","backgroundSize":"","originalWidth":607,"originalHeight":104,"strategy":"resample","height":0,"width":0},"twitterUsername":"thestartup_","collectionMastheadId":"e142c0e64791","sections":[{"type":2,"collectionHeaderMetadata":{"backgroundImage":{},"logoImage":{"id":"1*pempph-OAqpRKG5v1-yisg@2x.png","originalWidth":940,"originalHeight":832,"alt":"The Startup"},"alignment":1,"layout":6}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["6b48eeed6dee","79b4c834dcd9","565c364231e6"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["95b34b258403","238e7b04f3e9","bd2a4829f36b"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["e9be232280aa","86d2bce1c711","123d6ae31b6"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["35c763c92f62","78ddb6776b70","30dd6fb21664"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["206aa8773b16","78ddb6776b70","448413c0350"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["4575193db335","ae903a9fb8fb","a1f2e25db627"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":3,"postIds":["d4f4828c8781","3cae59976233","a009af88f66a"]}},{"type":1,"postListMetadata":{"source":3,"layout":4,"number":10,"postIds":["8d5beb95ef4a","95b8741aecaa","cf0f1a99e201","d6ecf9d02009","bbda8509e59a","e4cf582d6b9f","502e483fd161","fad43dc9fc3d","59a8c569f915"]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":6,"postIds":[],"sectionHeader":"HOT-OFF-THE-PRESS"}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":2,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":1,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":15,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":5,"postIds":[]}},{"type":1,"postListMetadata":{"source":2,"layout":4,"number":11,"postIds":[],"sectionHeader":"Trending"}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":25,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":25,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":23,"postIds":[],"sectionHeader":"Latest"}}],"tintColor":"#FFF9F9F9","lightText":false,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF848585","point":0},{"color":"#FF7B7B7B","point":0.1},{"color":"#FF717272","point":0.2},{"color":"#FF686868","point":0.3},{"color":"#FF5E5E5E","point":0.4},{"color":"#FF545454","point":0.5},{"color":"#FF494A4A","point":0.6},{"color":"#FF3F3F3F","point":0.7},{"color":"#FF333333","point":0.8},{"color":"#FF272727","point":0.9},{"color":"#FF1A1A1A","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FFF9F9F9","point":0},{"color":"#FFE7E7E7","point":0.1},{"color":"#FFD4D4D4","point":0.2},{"color":"#FFC1C1C1","point":0.3},{"color":"#FFADADAE","point":0.4},{"color":"#FF989999","point":0.5},{"color":"#FF838484","point":0.6},{"color":"#FF6D6E6E","point":0.7},{"color":"#FF565757","point":0.8},{"color":"#FF3C3E3E","point":0.9},{"color":"#FF202122","point":1}],"backgroundColor":"#FFF9F9F9"},"highlightSpectrum":{"colorPoints":[{"color":"#FFF4F2F2","point":0},{"color":"#FFF2F0F0","point":0.1},{"color":"#FFF0EEEE","point":0.2},{"color":"#FFEEECEC","point":0.3},{"color":"#FFECEBEA","point":0.4},{"color":"#FFEAE9E8","point":0.5},{"color":"#FFE8E7E7","point":0.6},{"color":"#FFE6E5E5","point":0.7},{"color":"#FFE4E3E3","point":0.8},{"color":"#FFE2E1E1","point":0.9},{"color":"#FFE0DFDF","point":1}],"backgroundColor":"#FFFFFFFF"},"darkBackgroundSpectrum":{"colorPoints":[{"color":"#FF9C9D9D","point":0},{"color":"#FFA5A5A5","point":0.1},{"color":"#FFADAEAE","point":0.2},{"color":"#FFB6B6B6","point":0.3},{"color":"#FFBFBEBE","point":0.4},{"color":"#FFC7C6C6","point":0.5},{"color":"#FFCFCECE","point":0.6},{"color":"#FFD8D6D6","point":0.7},{"color":"#FFE0DEDE","point":0.8},{"color":"#FFE8E6E6","point":0.9},{"color":"#FFF0EEED","point":1}],"backgroundColor":"#FF000000"}},"navItems":[{"type":2,"title":"Submit","postId":"3e8ed27bcd3e","url":"https://medium.com/swlh/when-one-upvote-is-worth-a-thousand-visitors-3e8ed27bcd3e","source":"postId"},{"type":3,"title":"Get smarter at writing","url":"https://medium.com/blankpage"}],"colorBehavior":2,"acceleratedMobilePagesState":0,"collectionFeatures":[30],"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"backgroundImage":{},"logoImage":{"id":"1*pempph-OAqpRKG5v1-yisg@2x.png","originalWidth":940,"originalHeight":832,"alt":"The Startup"},"alignment":1,"layout":6},"subscriberCount":767813,"tagline":"Medium's largest active publication, followed by +766K people. Follow to join our community.","isOptedIntoAurora":false,"newsletterV3":{"newsletterV3Id":"13df37cfc4c2","type":1,"name":"Top Stories","description":"The Startup's best stories delivered straight into your inbox, once a month.","collectionId":"f5af2b715248","newsletterSlug":"top-stories","isSubscribed":true,"showPromo":false,"avatarImageId":"1*_LcCftWqVwMNbRkNW29XFw.jpeg","creatorId":"d43c46db5b92","showNewsletterPostsInCollectionHome":false,"exportableSubscribersCount":2777,"subscribersCount":210006},"isCurationAllowedByDefault":false,"polarisCoverImage":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"type":"Collection"}},"Social":{"c6b26bf1493d":{"userId":"c6b26bf1493d","targetUserId":"c6b26bf1493d","type":"Social"}},"SocialStats":{"c6b26bf1493d":{"userId":"c6b26bf1493d","usersFollowedCount":20,"usersFollowedByCount":29,"type":"SocialStats"}}}},"v":3,"b":"20210216-2103-root"}